!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).main={})}(this,(function(t){"use strict";var e=1e6,n=1e6,r="[big.js] ",o=r+"Invalid ",i=o+"decimal places",c=o+"rounding mode",s=r+"Division by zero",u={},a=void 0,f=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function l(t,e,n,r){var o=t.c;if(n===a&&(n=t.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(c);if(e<1)r=3===n&&(r||!!o[0])||0===e&&(1===n&&o[0]>=5||2===n&&(o[0]>5||5===o[0]&&(r||o[1]!==a))),o.length=1,r?(t.e=t.e-e+1,o[0]=1):o[0]=t.e=0;else if(e<o.length){if(r=1===n&&o[e]>=5||2===n&&(o[e]>5||5===o[e]&&(r||o[e+1]!==a||1&o[e-1]))||3===n&&(r||!!o[0]),o.length=e,r)for(;++o[--e]>9;)if(o[e]=0,0===e){++t.e,o.unshift(1);break}for(e=o.length;!o[--e];)o.pop()}return t}function h(t,e,n){var r=t.e,o=t.c.join(""),i=o.length;if(e)o=o.charAt(0)+(i>1?"."+o.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)o="0"+o;o="0."+o}else if(r>0)if(++r>i)for(r-=i;r--;)o+="0";else r<i&&(o=o.slice(0,r)+"."+o.slice(r));else i>1&&(o=o.charAt(0)+"."+o.slice(1));return t.s<0&&n?"-"+o:o}u.abs=function(){var t=new this.constructor(this);return t.s=1,t},u.cmp=function(t){var e,n=this,r=n.c,o=(t=new n.constructor(t)).c,i=n.s,c=t.s,s=n.e,u=t.e;if(!r[0]||!o[0])return r[0]?i:o[0]?-c:0;if(i!=c)return i;if(e=i<0,s!=u)return s>u^e?1:-1;for(c=(s=r.length)<(u=o.length)?s:u,i=-1;++i<c;)if(r[i]!=o[i])return r[i]>o[i]^e?1:-1;return s==u?0:s>u^e?1:-1},u.div=function(t){var n=this,r=n.constructor,o=n.c,c=(t=new r(t)).c,u=n.s==t.s?1:-1,f=r.DP;if(f!==~~f||f<0||f>e)throw Error(i);if(!c[0])throw Error(s);if(!o[0])return t.s=u,t.c=[t.e=0],t;var h,p,d,v,g,w=c.slice(),m=h=c.length,b=o.length,y=o.slice(0,h),E=y.length,k=t,T=k.c=[],B=0,R=f+(k.e=n.e-t.e)+1;for(k.s=u,u=R<0?0:R,w.unshift(0);E++<h;)y.push(0);do{for(d=0;d<10;d++){if(h!=(E=y.length))v=h>E?1:-1;else for(g=-1,v=0;++g<h;)if(c[g]!=y[g]){v=c[g]>y[g]?1:-1;break}if(!(v<0))break;for(p=E==h?c:w;E;){if(y[--E]<p[E]){for(g=E;g&&!y[--g];)y[g]=9;--y[g],y[E]+=10}y[E]-=p[E]}for(;!y[0];)y.shift()}T[B++]=v?d:++d,y[0]&&v?y[E]=o[m]||0:y=[o[m]]}while((m++<b||y[0]!==a)&&u--);return T[0]||1==B||(T.shift(),k.e--,R--),B>R&&l(k,R,r.RM,y[0]!==a),k},u.eq=function(t){return 0===this.cmp(t)},u.gt=function(t){return this.cmp(t)>0},u.gte=function(t){return this.cmp(t)>-1},u.lt=function(t){return this.cmp(t)<0},u.lte=function(t){return this.cmp(t)<1},u.minus=u.sub=function(t){var e,n,r,o,i=this,c=i.constructor,s=i.s,u=(t=new c(t)).s;if(s!=u)return t.s=-u,i.plus(t);var a=i.c.slice(),f=i.e,l=t.c,h=t.e;if(!a[0]||!l[0])return l[0]?t.s=-u:a[0]?t=new c(i):t.s=1,t;if(s=f-h){for((o=s<0)?(s=-s,r=a):(h=f,r=l),r.reverse(),u=s;u--;)r.push(0);r.reverse()}else for(n=((o=a.length<l.length)?a:l).length,s=u=0;u<n;u++)if(a[u]!=l[u]){o=a[u]<l[u];break}if(o&&(r=a,a=l,l=r,t.s=-t.s),(u=(n=l.length)-(e=a.length))>0)for(;u--;)a[e++]=0;for(u=e;n>s;){if(a[--n]<l[n]){for(e=n;e&&!a[--e];)a[e]=9;--a[e],a[n]+=10}a[n]-=l[n]}for(;0===a[--u];)a.pop();for(;0===a[0];)a.shift(),--h;return a[0]||(t.s=1,a=[h=0]),t.c=a,t.e=h,t},u.mod=function(t){var e,n=this,r=n.constructor,o=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(s);return n.s=t.s=1,e=1==t.cmp(n),n.s=o,t.s=i,e?new r(n):(o=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=o,r.RM=i,this.minus(n.times(t)))},u.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t},u.plus=u.add=function(t){var e,n,r,o=this,i=o.constructor;if(t=new i(t),o.s!=t.s)return t.s=-t.s,o.minus(t);var c=o.e,s=o.c,u=t.e,a=t.c;if(!s[0]||!a[0])return a[0]||(s[0]?t=new i(o):t.s=o.s),t;if(s=s.slice(),e=c-u){for(e>0?(u=c,r=a):(e=-e,r=s),r.reverse();e--;)r.push(0);r.reverse()}for(s.length-a.length<0&&(r=a,a=s,s=r),e=a.length,n=0;e;s[e]%=10)n=(s[--e]=s[e]+a[e]+n)/10|0;for(n&&(s.unshift(n),++u),e=s.length;0===s[--e];)s.pop();return t.c=s,t.e=u,t},u.pow=function(t){var e=this,r=new e.constructor("1"),i=r,c=t<0;if(t!==~~t||t<-1e6||t>n)throw Error(o+"exponent");for(c&&(t=-t);1&t&&(i=i.times(e)),t>>=1;)e=e.times(e);return c?r.div(i):i},u.prec=function(t,n){if(t!==~~t||t<1||t>e)throw Error(o+"precision");return l(new this.constructor(this),t,n)},u.round=function(t,n){if(t===a)t=0;else if(t!==~~t||t<-e||t>e)throw Error(i);return l(new this.constructor(this),t+this.e+1,n)},u.sqrt=function(){var t,e,n,o=this,i=o.constructor,c=o.s,s=o.e,u=new i("0.5");if(!o.c[0])return new i(o);if(c<0)throw Error(r+"No square root");0===(c=Math.sqrt(o+""))||c===1/0?((e=o.c.join("")).length+s&1||(e+="0"),s=((s+1)/2|0)-(s<0||1&s),t=new i(((c=Math.sqrt(e))==1/0?"5e":(c=c.toExponential()).slice(0,c.indexOf("e")+1))+s)):t=new i(c+""),s=t.e+(i.DP+=4);do{n=t,t=u.times(n.plus(o.div(n)))}while(n.c.slice(0,s).join("")!==t.c.slice(0,s).join(""));return l(t,(i.DP-=4)+t.e+1,i.RM)},u.times=u.mul=function(t){var e,n=this,r=n.constructor,o=n.c,i=(t=new r(t)).c,c=o.length,s=i.length,u=n.e,a=t.e;if(t.s=n.s==t.s?1:-1,!o[0]||!i[0])return t.c=[t.e=0],t;for(t.e=u+a,c<s&&(e=o,o=i,i=e,a=c,c=s,s=a),e=new Array(a=c+s);a--;)e[a]=0;for(u=s;u--;){for(s=0,a=c+u;a>u;)s=e[a]+i[u]*o[a-u-1]+s,e[a--]=s%10,s=s/10|0;e[a]=s}for(s?++t.e:e.shift(),u=e.length;!e[--u];)e.pop();return t.c=e,t},u.toExponential=function(t,n){var r=this,o=r.c[0];if(t!==a){if(t!==~~t||t<0||t>e)throw Error(i);for(r=l(new r.constructor(r),++t,n);r.c.length<t;)r.c.push(0)}return h(r,!0,!!o)},u.toFixed=function(t,n){var r=this,o=r.c[0];if(t!==a){if(t!==~~t||t<0||t>e)throw Error(i);for(t=t+(r=l(new r.constructor(r),t+r.e+1,n)).e+1;r.c.length<t;)r.c.push(0)}return h(r,!1,!!o)},u[Symbol.for("nodejs.util.inspect.custom")]=u.toJSON=u.toString=function(){var t=this,e=t.constructor;return h(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])},u.toNumber=function(){var t=Number(h(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(t.toString()))throw Error(r+"Imprecise conversion");return t},u.toPrecision=function(t,n){var r=this,i=r.constructor,c=r.c[0];if(t!==a){if(t!==~~t||t<1||t>e)throw Error(o+"precision");for(r=l(new i(r),t,n);r.c.length<t;)r.c.push(0)}return h(r,t<=r.e||r.e<=i.NE||r.e>=i.PE,!!c)},u.valueOf=function(){var t=this,e=t.constructor;if(!0===e.strict)throw Error(r+"valueOf disallowed");return h(t,t.e<=e.NE||t.e>=e.PE,!0)};var p=function t(){function e(n){var r=this;if(!(r instanceof e))return n===a?t():new e(n);if(n instanceof e)r.s=n.s,r.e=n.e,r.c=n.c.slice();else{if("string"!=typeof n){if(!0===e.strict&&"bigint"!=typeof n)throw TypeError(o+"value");n=0===n&&1/n<0?"-0":String(n)}!function(t,e){var n,r,i;if(!f.test(e))throw Error(o+"number");t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".",""));(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length);for(i=e.length,r=0;r<i&&"0"==e.charAt(r);)++r;if(r==i)t.c=[t.e=0];else{for(;i>0&&"0"==e.charAt(--i););for(t.e=n-r-1,t.c=[],n=0;r<=i;)t.c[n++]=+e.charAt(r++)}}(r,n)}r.constructor=e}return e.prototype=u,e.DP=20,e.RM=1,e.NE=-7,e.PE=21,e.strict=false,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}(),d={plus:function(t,e){return new p(t).plus(e).toNumber()},minus:function(t,e){return new p(t).minus(e).toNumber()},times:function(t,e){return new p(t).times(e).toNumber()},divide:function(t,e){return new p(t).div(e).toNumber()}},v={money:function(t,e){return e.fenToYuan&&(t=d.divide(t,1e3)),(e.precision||0===e.precision)&&t.toFixed(e.precision),e.affix?e.affix+String(t):t}};var g={number:function(t,e,n){return void 0===t&&(t=2),void 0===e&&(e=[0,99999999.99]),void 0===n&&(n=[0,1]),function(r,o,i){var c=/^-?\d+$/;if(t&&(c=new RegExp("^(([1-9][0-9]*)|(([0]\\.\\d{1,".concat(t,"}|[1-9][0-9]*\\.\\d{1,").concat(t,"})))$"))),isNaN(o))return i(new Error("仅允许输入数字"));if(new RegExp("^((0{2,})|(0[1-9]{1,}))").test(o))return i(new Error("请输入正确的格式(非0开头)"));var s=o>e[0]&&o<e[1];return n[0]&&n[1]?s=o>=e[0]&&o<=e[1]:n[0]?s=o>e[0]&&o<=e[1]:n[1]&&(s=o>=e[0]&&o<e[1]),s?c.test(o)?void i():i(new Error(0!=t?"最多支持".concat(t,"位小数"):"请输入".concat(e[0],"~").concat(e[1],"范围内整数"))):i(new Error("请输入".concat(e[0],"~").concat(e[1],"范围内").concat(0!=t?"数字":"整数")))}},username:function(t){return function(e,n,r){var o=new RegExp("^[\\u4E00-\\u9FA5A-Za-z0-9·]{".concat(t[0],",").concat(t[1],"}$"));return n?o.test(n)?void r():r(new Error("请输入".concat(t[0],"~").concat(t[1],"位的中文/字母/数字"))):r()}}};"function"==typeof SuppressedError&&SuppressedError;var w=function(t,e){var n,r,o,i=(n="function (e){\n    setInterval(function (){\n      this.postMessage(null)\n    },".concat(e,")\n  }"),r=new Blob(["("+n+")()"]),o=window.URL.createObjectURL(r),new Worker(o));return i.onmessage=t,i};function m(t){var e=typeof t;return null!=t&&("object"===e||"function"===e)}var b="object"==typeof global&&null!==global&&global.Object===Object&&global,y="object"==typeof globalThis&&null!==globalThis&&globalThis.Object===Object&&globalThis,E="object"==typeof self&&null!==self&&self.Object===Object&&self,k=y||b||E||Function("return this")();function T(t,e,n){var r,o,i,c,s,u,a=0,f=!1,l=!1,h=!0,p=!e&&0!==e&&"function"==typeof k.requestAnimationFrame;if("function"!=typeof t)throw new TypeError("Expected a function");function d(e){var n=r,i=o;return r=o=void 0,a=e,c=t.apply(i,n)}function v(t,e){return p?(k.cancelAnimationFrame(s),k.requestAnimationFrame(t)):setTimeout(t,e)}function g(t){var n=t-u;return void 0===u||n>=e||n<0||l&&t-a>=i}function w(){var t=Date.now();if(g(t))return b(t);s=v(w,function(t){var n=t-a,r=e-(t-u);return l?Math.min(r,i-n):r}(t))}function b(t){return s=void 0,h&&r?d(t):(r=o=void 0,c)}function y(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=Date.now(),h=g(i);if(r=t,o=this,u=i,h){if(void 0===s)return function(t){return a=t,s=v(w,e),f?d(t):c}(u);if(l)return s=v(w,e),d(u)}return void 0===s&&(s=v(w,e)),c}return e=+e||0,m(n)&&(f=!!n.leading,i=(l="maxWait"in n)?Math.max(+n.maxWait||0,e):i,h="trailing"in n?!!n.trailing:h),y.cancel=function(){var t;void 0!==s&&(t=s,p?k.cancelAnimationFrame(t):clearTimeout(t)),a=0,r=u=o=s=void 0},y.flush=function(){return void 0===s?c:b(Date.now())},y.pending=function(){return void 0!==s},y}var B=function(){function t(t,e,n){void 0===e&&(e={}),void 0===n&&(n=[]),this.heartBeatContent="ping",this.heartBeatInterval=1e4,this.pongTimeout=8e3,this.reconnectTimeout=1e4,this.reconnectLimit=10,this.reconnectCount=0,this.dontReconnect=!1,this.networkError=!1,this.openError=!1,this.url="",this.config={},this.protocols=[],this.tReconnect=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return m(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),T(t,e,{leading:r,trailing:o,maxWait:e})}(this.reconnect,1e3,{leading:!0,trailing:!1}),this.url=t,this.config=e,this.protocols=n;try{this.init(t,e,n)}catch(t){this.openError=!0}}return t.prototype.init=function(t,e,n){var r=this;void 0===t&&(t=this.url),void 0===e&&(e=this.config),void 0===n&&(n=this.protocols);var o=e.open,i=e.message,c=e.error,s=e.close,u=e.beforeunload,a=e.heartBeat,f=void 0===a?{}:a,l=e.reconnect,h=void 0===l?{}:l,p=e.key,d=void 0===p?"":p;this.instance=new WebSocket(t,n),this.logkey=d,this.print("new",t,f,h),(null==f?void 0:f.interval)&&(this.heartBeatInterval=f.interval),(null==f?void 0:f.content)&&(this.heartBeatContent=f.interval),(null==f?void 0:f.fn)&&(this.heartBeatFn=f.fn),this.instance.onopen=function(t){r.dontReconnect=!1,r.print("open"),r.stopHeartBeat(),r.startHeartBeat(),o&&o(t)},this.instance.onmessage=function(t){r.logkey&&console.log("[output:ws]".concat(r.logkey," message %c ").concat(t.data),"color:#0f0;");var e=t.data;if("string"==typeof e&&!["pong","logout","kickedOut"].includes(e))try{e=JSON.parse(e)}catch(t){console.warn(t)}i&&i(e),r.reconnectCount=0,r.stopHeartBeat(),r.startHeartBeat()},this.instance.onclose=function(t){r.print("close"),s&&s(t),r.tReconnect(),window.navigator.onLine||(r.networkError=!0)},this.instance.onerror=function(t){r.print("error"),c&&c(t),r.tReconnect()},u&&(this.onbeforeunload=u)},t.prototype.startHeartBeat=function(){var t=this;this.checkNetwork();this.heartBeat=w(function(){var e;t.dontReconnect||(1==(null===(e=t.instance)||void 0===e?void 0:e.readyState)?(t.logkey&&console.log("[output:ws]".concat(t.logkey," heartbeat %c ").concat(t.heartBeatContent),"color:#0ff;"),t.heartBeatFn?t.heartBeatFn():t.instance.send(t.heartBeatContent),t.pongTimeoutId=setTimeout((function(){var e;t.print("pongTimeout"),null===(e=t.instance)||void 0===e||e.close()}),t.pongTimeout)):(t.print("error","断开状态，尝试重连",t.instance),t.tReconnect()))}.bind(this),this.heartBeatInterval)},t.prototype.stopHeartBeat=function(){clearTimeout(this.pongTimeoutId),function(t){try{t&&t.terminate()}catch(t){console.log(t)}}(this.heartBeat)},t.prototype.reconnect=function(){var t,e=this;this.dontReconnect||1!=(null===(t=this.instance)||void 0===t?void 0:t.readyState)&&(this.checkNetwork(),this.stopHeartBeat(),clearTimeout(this.reconnectTimeoutId),this.reconnectCount++,this.reconnectCount<this.reconnectLimit?this.reconnectTimeoutId=setTimeout((function(){clearTimeout(e.reconnectTimeoutId),e.reInit()}),this.reconnectTimeout):this.reconnectCount>=this.reconnectLimit&&(this.stopReconnect(),console.error("服务异常，请联系管理员!!!")))},t.prototype.stopReconnect=function(){this.dontReconnect=!0,clearTimeout(this.reconnectTimeoutId)},t.prototype.kill=function(){var t;this.print("kill"),this.stopReconnect(),this.stopHeartBeat(),null===(t=this.instance)||void 0===t||t.close(),this.instance=null},t.prototype.reInit=function(t){this.kill(),this.init(t)},t.prototype.checkNetwork=function(){1==this.networkError&&1==window.navigator.onLine&&(this.networkError=!1)},t.prototype.print=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logkey&&console.log.apply(console,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}(["[output:ws]".concat(this.logkey)],t,!1))},t}();t.Calc=d,t.ElFormValidator=g,t.Format=v,t.Reg={phone:/^1\d{10}$/,personName:/^[\u4e00-\u9fa5_a-zA-Z0-9-]{2,16}$/,longtitude:/^(\-|\+)?(((\d|[1-9]\d|1[0-7]\d|0{1,3})\.\d{0,15})|(\d|[1-9]\d|1[0-7]\d|0{1,3})|180\.0{0,15}|180)$/,latitude:/^(\-|\+)?([0-8]?\d{1}\.\d{0,15}|90\.0{0,15}|[0-8]?\d{1}|90)$/,idCard:/^([1-6][1-9]|50)\d{4}(18|19|20)\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$|^([1-6][1-9]|50)\d{4}\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\d{3}$/},t.WebsocketHeartBeat=B,t.isMobileByUa=function(t){return void 0===t&&(t=window.navigator.userAgent),/(Android|iPhone|Windows Phone|iPad|webOS|BlackBerry|mobile)/i.test(t)},t.padZero=function(t){return Number.isInteger(t)?t<10?"0".concat(t):String(t):t},t.typeOf=function(t,e){var n=typeof t;return"object"!==n?e?n.charAt(0).toUpperCase()+n.slice(1,n.length)==e:n.charAt(0).toUpperCase()+n.slice(1,n.length):e?Object.prototype.toString.call(t).replace(/^\[object (\S+)\]$/,"$1")==e:Object.prototype.toString.call(t).replace(/^\[object (\S+)\]$/,"$1")},Object.defineProperty(t,"__esModule",{value:!0})}));
